<section class="lg:flex h-screen">
  <div class="drawer bg-base-100 flex justify-between border-2 rounded-xl lg:drawer-open lg:border-0 z-10">
    <input id="my-drawer" type="checkbox" class="drawer-toggle" />
  
    <div class="lg:hidden">
      <%= image_tag "iding_logo.png", class:" w-36 m-auto py-2" %> 
    </div>

    <div class="drawer-content lg:hidden lg:h-screen">
      <label for="my-drawer" class="btn btn-square btn-ghost">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-5 h-5 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
      </label>
    </div>
      
    <div class="drawer-side">
      <label for="my-drawer" class="drawer-overlay"></label>
      <ul class="menu p-4 w-60 lg:h-screen bg-base-200 text-base-content flex flex-col justify-between lg:w-40">
        <div>
          <%= image_tag "iding_logo.png", class:"w-40 m-auto py-2" %> 
          <li class="font-semibold text-slate-700 my-2 mt-6"><a class="m-auto">訂位列表</a></li>
          <li class="font-semibold text-slate-700 my-2 m-auto"><a class="m-auto">歷史紀錄</a></li>
          <li class="font-semibold text-slate-700 my-2 m-auto"><a class="m-auto">訂位搜尋</a></li>
          <li class="font-semibold text-slate-700 my-2 m-auto"><a class="m-auto">餐廳設定</a></li>
        </div>
        <div>
          <li class="font-semibold text-slate-700 my-2 m-auto"><a class="m-auto">最新通知</a></li>
          <li class="font-semibold text-slate-700 my-2 m-auto"><a class="m-auto">聯繫客服</a></li>
        </div>
      </ul>
    </div>
  </div>
  
  <div>
    <div class="m-2 lg:mx-4">
      <div class="flex navbar bg-base-100 my-3 border-2 rounded-xl lg:w-[86vw]">
        <div class="lg:mr-auto">
          <a class="hidden btn btn-ghost normal-case lg:flex">返回</a>
        </div>

        <div class="m-auto lg:ml-auto">
          <a class="btn btn-ghost normal-case text-xl">行事曆</a>
        </div>

        <div class="lg:ml-auto">
          <a class="hidden btn btn-ghost normal-case lg:flex">時間軸</a>
          <a class="hidden btn btn-ghost normal-case lg:flex">列表</a>
          <a class="hidden btn btn-ghost normal-case lg:flex">桌位圖</a>
        </div>
      </div>
    </div>

    <div class="w-[90vw] mx-auto my-3 border-2 rounded-xl collapse bg-base-100 lg:hidden">
      <input type="checkbox" class="collapse-toggle hidden" id="collapse-form-toggle">
      <label for="collapse-form-toggle" class="cursor-pointer font-bold text-xl text-center">
        <h1 class="text-xl font-semibold">
        <%= image_tag "logo.png", class:"inline w-14 md:w-30 xl:w-30 py-2" %>
        新增訂位
        </h1>
      </label>
      <div class="collapse-content p-1">
        <%= form_with(model: @reservation, url: admin_restaurant_reservations_path(restaurant_id: @restaurant.id), method: :post, data: { turbo: false }) do |f| %>

          <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>"/>

          <div class="px-1 pb-1 ">
            <%= f.text_field :name, class:"text-black placeholder-gray-600 w-full px-4 py-2.5 mt-2 text-base transition duration-500 ease-in-out transform border-transparent rounded-lg bg-gray-200 focus:bg-white focus:outline-none focus:shadow-outline focus:ring-gray-400 focus:ring-2 ring-offset-2  focus:border-gray-500", placeholder: "姓名" %>

            <%= f.text_field :tel, class: "text-black placeholder-gray-600 w-full px-4 py-2.5 mt-2 text-base transition duration-500 ease-in-out transform border-transparent rounded-lg bg-gray-200 focus:bg-white focus:outline-none focus:shadow-outline focus:ring-gray-400 focus:ring-2 ring-offset-2  focus:border-gray-500", placeholder: "電話", type: "tel" %>

            <div class="flex gap-2">
              <%= f.date_field :date, class:"text-black placeholder-gray-600 w-full px-4 py-2.5 mt-2 text-base transition duration-500 ease-in-out transform border-transparent rounded-lg bg-gray-200 focus:bg-white focus:outline-none focus:shadow-outline focus:ring-gray-400 focus:ring-2 ring-offset-2  focus:border-gray-500" %>

              <%= f.time_field :time, class:"text-black placeholder-gray-600 w-full px-4 py-2.5 mt-2 text-base transition duration-500 ease-in-out transform border-transparent rounded-lg bg-gray-200 focus:bg-white focus:outline-none focus:shadow-outline focus:ring-gray-400 focus:ring-2 ring-offset-2  focus:border-gray-500" %>
            </div>

            <div class="flex gap-2">
              <%= f.number_field :adult_num, class: "text-black placeholder-gray-600 w-full px-4 py-2.5 mt-2 text-base transition duration-500 ease-in-out transform border-transparent rounded-lg bg-gray-200 focus:bg-white focus:outline-none focus:shadow-outline focus:ring-gray-400 focus:ring-2 ring-offset-2  focus:border-gray-500", placeholder: "大人", min: 0 %>

              <%= f.number_field :kid_num, class: "text-black placeholder-gray-600 w-full px-4 py-2.5 mt-2 text-base transition duration-500 ease-in-out transform border-transparent rounded-lg bg-gray-200 focus:bg-white focus:outline-none focus:shadow-outline focus:ring-gray-400 focus:ring-2 ring-offset-2  focus:border-gray-500", placeholder: "小孩", min: 0 %>
            </div>

            <%= f.text_area :note, class:"textarea focus:textarea-border-transparent text-black h-32 placeholder-gray-600 w-full px-4 py-2.5 mt-2 text-base transition duration-500 ease-in-out transform border-transparent rounded-lg bg-gray-200 focus:bg-white focus:outline-none focus:shadow-outline focus:ring-gray-400 focus:ring-2 ring-offset-2  focus:border-gray-500", placeholder: "備註" %>

          </div>

          <div class="flex flex-row-reverse py-6">
            <div class="flex-initial m-auto">
              <%= f.submit "建立訂位", class: "flex items-center px-5 py-2.5 font-medium tracking-wide text-white capitalize bg-black rounded-md hover:bg-gray-800 focus:outline-none focus:bg-gray-900 transition duration-300 transform active:scale-95 ease-in-out" %>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <div class="lg:flex m-3 relative h-[calc(100%-96px)]">
      <div class="hidden top-0 w-4/5 lg:block lg:w-1/3">
        <div class="mt-5 mx-1 bg-white rounded-lg shadow border-b border-2">
          <div class="flex justify-center">
            <div>
              <%= image_tag "logo.png", class:"w-14 md:w-30 xl:w-30 py-2" %>
            </div>
            <h1 class="text-2xl font-semibold py-5">新增訂位</h1>
          </div>
            <%= form_with(model: @reservation, url: admin_restaurant_reservations_path(restaurant_id: @restaurant.id), method: :post, data: { turbo: false }) do |f| %>

              <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>"/>

              <div class="px-5 pb-5">
                <%= f.text_field :name, class:"text-black placeholder-gray-600 w-full px-4 py-2.5 mt-2 text-base transition duration-500 ease-in-out transform border-transparent rounded-lg bg-gray-200 focus:bg-white focus:outline-none focus:shadow-outline focus:ring-gray-400 focus:ring-2 ring-offset-2  focus:border-gray-500", placeholder: "姓名" %>

                <%= f.text_field :tel, class: "text-black placeholder-gray-600 w-full px-4 py-2.5 mt-2 text-base transition duration-500 ease-in-out transform border-transparent rounded-lg bg-gray-200 focus:bg-white focus:outline-none focus:shadow-outline focus:ring-gray-400 focus:ring-2 ring-offset-2  focus:border-gray-500", placeholder: "電話", type: "tel" %>

                <div class="flex gap-2">
                  <%= f.date_field :date, class:"text-black placeholder-gray-600 w-full px-4 py-2.5 mt-2 text-base transition duration-500 ease-in-out transform border-transparent rounded-lg bg-gray-200 focus:bg-white focus:outline-none focus:shadow-outline focus:ring-gray-400 focus:ring-2 ring-offset-2  focus:border-gray-500" %>

                  <%= f.time_field :time, class:"text-black placeholder-gray-600 w-full px-4 py-2.5 mt-2 text-base transition duration-500 ease-in-out transform border-transparent rounded-lg bg-gray-200 focus:bg-white focus:outline-none focus:shadow-outline focus:ring-gray-400 focus:ring-2 ring-offset-2  focus:border-gray-500" %>
                </div>

                <div class="flex gap-2">
                  <%= f.number_field :adult_num, class: "text-black placeholder-gray-600 w-full px-4 py-2.5 mt-2 text-base transition duration-500 ease-in-out transform border-transparent rounded-lg bg-gray-200 focus:bg-white focus:outline-none focus:shadow-outline focus:ring-gray-400 focus:ring-2 ring-offset-2 focus:border-gray-500", placeholder: "大人", min: 0 %>

                  <%= f.number_field :kid_num, class: "text-black placeholder-gray-600 w-full px-4 py-2.5 mt-2 text-base transition duration-500 ease-in-out transform border-transparent rounded-lg bg-gray-200 focus:bg-white focus:outline-none focus:shadow-outline focus:ring-gray-400 focus:ring-2 ring-offset-2 focus:border-gray-500", placeholder: "小孩", min: 0 %>
                </div>

                <%= f.text_area :note, class:"textarea focus:textarea-border-transparent text-black h-32 placeholder-gray-600 w-full px-4 py-2.5 mt-2 text-base transition duration-500 ease-in-out transform border-transparent rounded-lg bg-gray-200 focus:bg-white focus:outline-none focus:shadow-outline focus:ring-gray-400 focus:ring-2 ring-offset-2  focus:border-gray-500", placeholder: "備註" %>
              </div>

              <div class="flex flex-row-reverse py-6">
                <div class="flex-initial m-auto">
                  <%= f.submit "建立訂位", class: "flex items-center px-5 py-2.5 font-medium tracking-wide text-white capitalize bg-black rounded-md hover:bg-gray-800 focus:outline-none focus:bg-gray-900 transition duration-300 transform active:scale-95 ease-in-out" %>
                </div>
              </div>
            <% end %>
        </div>
      </div>
      <div class="w-full lg:w-3/4 h-auto h-[calc(100%-100px)]">
        <div class="mt-5 mx-auto bg-white border-3 rounded-lg shadow lg:absolute top-0 lg:right-2 lg:w-4/6 overflow-y-auto lg:h-full w-11/12">
          <% @reservations.each do |reservation| %>
            <div class="border-2 rounded w-full mb-1">
              <div class="flex justify-between border bg-gray-200 py-2 px-5 font-black lg:pl-12 items-center">
                <div>
                  <%= reservation.date%> 
                  <%= reservation.time.strftime('%R') %>
                </div>
                <div>
                  <i class="fa-regular fa-trash-can"></i>
                  <%= link_to '刪除', admin_restaurant_reservation_path(restaurant_id: @restaurant.id, id: reservation.id), data: { turbo_method: 'delete', turbo_confirm: '確定刪除訂位?' } %>
                </div>
              </div>
              
              <div class="flex justify-around lg:mx-5 sm:justify-between items-center">
                <div class="flex">
                  <div class="my-auto">
                    <i class="fa-solid fa-pen-to-square"></i>
                  </div>
                  <div class="lg:w-24 lg:h-24 mx-3">
                    <div class="hidden lg:inline">
                      <%= image_tag "cat-default-avatar.png" %>
                    </div>
                  </div>
                  <div class="mx-2 my-auto items-center">
                    <div class="font-bold text-sm lg:text-lg">
                      <%= reservation.name %>
                    </div>
                    <div class="lg:inline lg:text-sm opacity-50">
                      <%= reservation.tel %>
                    </div>
                  </div>
                </div>
                <div class="flex">
                  <div>
                    <%= reservation.adult_num %> 位大人<br>
                    <%= reservation.kid_num %> 位小孩
                  </div>
                </div>
                <div class="border-2 p-2 rounded-lg">
                  <p>座位</p>
                </div>
                <div class="w-10 lg:w-24 text-center">
                  <%= reservation.note %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</section>
